<!--
  ~ Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License version 3 as published by
  ~ the Free Software Foundation.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div ng-if="createSites" class="container-fluid admin-view">
  <div class="row full">
    <div id="" class="mainContainer">
      <div class="row">
        <div class="col-md-12" id="admin-clusters">
          <header class="screen-title mb10">
            <h1>{{ 'admin.clustering.HEADER_LABEL' | translate }}</h1>
            <div class="actions" style="float: right;">
              <div class="btn-group">
                <button type="button" class="btn btn-default" ng-click="clusters.getClusters()">
                  <i class="fa fa-refresh"></i>
                </button>
              </div>

            </div>
          </header>

          <table class="table table-striped">
            <thead>
            <tr>
              <th>{{ 'admin.clustering.LOCAL_ADDRESS' | translate }}</th>
              <th>{{ 'admin.clustering.STATE' | translate }}</th>
              <th>{{ 'admin.clustering.GIT_URL' | translate }}</th>
              <th>{{ 'admin.clustering.GIT_NAME' | translate }}</th>
              <th>{{ 'admin.clustering.GIT_AUTH_TYPE' | translate }}</th>
              <th></th>
            </tr>
            </thead>
            <tbody>

            <tr ng-repeat="clusterMember in membersCollection track by $index">
              <td class="localIp">{{clusterMember.localAddress}}</td>
              <td class="state">{{clusterMember.state}}</td>
              <td class="gitUrl break">{{clusterMember.gitUrl}}</td>
              <td class="gitRemoteName">{{clusterMember.gitRemoteName}}</td>
              <td class="gitAuthType">{{clusterMember.gitAuthType}}</td>

              <td class="remove">
                <a ng-click="clusters.removeClusterMember(clusterMember)" class="btn btn-sm" ng-show="clusterMember.state == 'INACTIVE'">
                  <i class="fa fa-trash-o">
                  </i>
                </a>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/ng-template" id="confirmationModal.html">
  <div class="modal-header">
    <h3 class="modal-title">Confirmation</h3>
  </div>
  <div class="modal-body">
    {{ confirmationText }}
  </div>
  <div class="modal-footer" id="remove-cluster">
    <button class="btn no" ng-click="hideModal()">{{ 'common.NO' | translate }}</button>
    <button class="btn yes" ng-click="confirmationAction(); hideModal()">{{ 'common.YES' | translate }}</button>
  </div>
</script>

<script type="text/ng-template" id="notificationModal.html">
  <div class="modal-header">
    <h3 class="modal-title">Notification</h3>
  </div>
  <div class="modal-body">
    <p class="notificationBody">
      <span class="icon fa fa-{{ notificationType }}"></span>
      <span class="text"> {{ notificationText }}</span>
    </p>
  </div>s
</script>

<script type="text/ng-template" id="deleteClusterError.html">
  <div class="modal-header">
    <h3 class="modal-title">{{ 'common.NOTIFICATION' | translate }}</h3>
  </div>
  <div id="delete-cluster-error" class="modal-body">
    <p class="errorTitle">{{ 'admin.clustering.DELETE_ERROR' | translate }}</p>
    <p class="word-wrap errorMessage">{{ 'admin.clustering.ERROR' | translate }} {{error}}</p>
  </div>
  <div class="modal-footer">
    <button class="btn btn-default" ng-click="hideModal()">{{ 'common.CLOSE_LABEL' | translate }}</button>
  </div>
</script>
